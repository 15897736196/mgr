{"version":3,"file":"js/Dashboard.b12ebd57.js","mappings":"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","sources":["webpack://building-material-mgr-fe/./src/views/Dashboard/index.vue","webpack://building-material-mgr-fe/./src/views/Dashboard/index.js","webpack://building-material-mgr-fe/./src/views/Dashboard/index.vue?5160","webpack://building-material-mgr-fe/./src/views/Log/index.vue","webpack://building-material-mgr-fe/./src/helpers/log/index.js","webpack://building-material-mgr-fe/./src/views/Log/index.js","webpack://building-material-mgr-fe/./src/views/Log/index.vue?684c"],"sourcesContent":["<template>\r\n  <div>\r\n    <a-spin :spinning=\"loading\">\r\n        <a-card>\r\n      <div class=\"list\">\r\n        <div class=\"item\">\r\n          <div class=\"title\">材料</div>\r\n          <div class=\"count\">共{{ baseInfo.book }}项</div>\r\n        </div>\r\n        <div class=\"item\">\r\n          <div class=\"title\">用户</div>\r\n          <div class=\"count\">共{{ baseInfo.user }}位</div>\r\n        </div>\r\n        <div class=\"item\">\r\n          <div class=\"title\">日志</div>\r\n          <div class=\"count\">共{{ baseInfo.log }}条</div>\r\n        </div>\r\n      </div>\r\n    </a-card>\r\n    </a-spin>\r\n\r\n    <div class=\"table-list\">\r\n        <div class=\"left\">\r\n            <book simple/>\r\n\r\n        </div>\r\n        <div class=\"right\">\r\n            <log simple/>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script src=\"./index.js\">\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"./index.scss\";\r\n</style>\r\n","import { defineComponent, onMounted,ref} from \"vue\";\r\nimport { dashboard } from \"@/service\";\r\nimport { result } from \"@/helpers/utils\";\r\nimport Log from '@/views/Log/index.vue'\r\nimport Book from '@/views/Main/index.vue'\r\n\r\n\r\nexport default defineComponent({\r\n    components :{\r\n        Book,\r\n        Log\r\n    },\r\n    setup(){\r\n        const loading = ref(true);\r\n        const baseInfo = ref({});\r\n        const getBaseInfo = async()=>{\r\n            loading.value = true;\r\n            const res = await dashboard.baseInfo();\r\n            loading.value = false;\r\n            result(res)\r\n            .success(({data})=>{\r\n                baseInfo.value = data;\r\n            });\r\n        }\r\n\r\n\r\n        onMounted(()=>{\r\n            getBaseInfo();\r\n        });\r\n\r\n        return {\r\n            baseInfo,\r\n            loading\r\n        }\r\n    }\r\n\r\n})","import { render } from \"./index.vue?vue&type=template&id=010faa67&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=010faa67&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Molly Wang\\\\Desktop\\\\project\\\\building-material-mgr-fe\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-010faa67\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <a-spin :spinning = \"loading\">\r\n      <a-card :title=\"simple? '最近的操作日志' : '' \">\r\n\r\n        <h2 v-if=\"!simple\">操作日志</h2>\r\n\r\n        <a-divider  v-if=\"!simple\"/>\r\n\r\n        <a-table\r\n          bordered\r\n          :data-source=\"list\"\r\n          :columns=\"columns\"\r\n          :pagination=\"false\"\r\n        >\r\n\r\n        <template #createdAt =\"{ record }\">\r\n            {{formatTimeStamp(record.meta.createAt)}}\r\n        </template>\r\n\r\n        <template #action =\"{ record }\" v-if=\"!simple\">\r\n            <a href=\"javascript:;\" @click=\"remove(record)\">删除</a>\r\n        </template>\r\n\r\n        </a-table>\r\n\r\n        <flex-end>\r\n          <a-pagination\r\n            style=\"margin-top: 24px\"\r\n            v-model:current=\"curPage\"\r\n            :pageSize=\"20\"\r\n            :total=\"total\"\r\n            @change=\"setPage\"\r\n            v-if=\"!simple\"\r\n          />\r\n        </flex-end>\r\n      </a-card>\r\n    </a-spin>\r\n  </div>\r\n</template>\r\n<script src=\"./index.js\">\r\n</script>","const LOG_MAP = [\r\n    ['/character/list','获取角色列表'],\r\n    ['/log/list','获取日志列表'],\r\n    ['/user/info','获取自己的登入信息'],\r\n];\r\n\r\n\r\nexport const getLogInfoByPath = (path)=>{\r\n\r\n    let title= '';\r\n    LOG_MAP.forEach((item)=>{\r\n        if(path.includes(item[0])){\r\n            title = path.replace(item[0],item[1]);\r\n        }\r\n    });\r\n    return title || path;\r\n}","import { defineComponent,onMounted,ref } from \"vue\";\r\nimport { log } from '@/service'\r\nimport { result,formatTimeStamp } from \"@/helpers/utils\";\r\nimport { getLogInfoByPath } from \"@/helpers/log\";\r\nimport { message } from \"ant-design-vue\";\r\nconst columns = [\r\n    {\r\n        title: '用户名',\r\n        dataIndex: 'user.account'\r\n    },\r\n    {\r\n        title: '动作',\r\n        dataIndex: 'action'\r\n    },\r\n    {\r\n        title: '记录时间',\r\n        slots: {\r\n            customRender: 'createdAt'\r\n            }\r\n    },\r\n    {\r\n        title: '操作',\r\n        slots: {\r\n            customRender: 'action'\r\n            }\r\n    },\r\n    // {\r\n    //     title: '库存 /件',\r\n    //     dataIndex: '',\r\n    //     slots: {\r\n    //         customRender: 'count'\r\n    //     }\r\n    // },\r\n]\r\n\r\nexport default defineComponent({\r\n    props:{\r\n        simple:Boolean\r\n    },\r\n\r\n    setup(props){\r\n        const columns = [\r\n            {\r\n                title: '用户名',\r\n                dataIndex: 'user.account'\r\n            },\r\n            {\r\n                title: '动作',\r\n                dataIndex: 'action'\r\n            },\r\n            {\r\n                title: '记录时间',\r\n                slots: {\r\n                    customRender: 'createdAt'\r\n                    }\r\n            },\r\n\r\n        ]\r\n        if(!props.simple){\r\n            columns.push(            {\r\n                title: '操作',\r\n                slots: {\r\n                    customRender: 'action'\r\n                    }\r\n            })\r\n        }\r\n\r\n        const curPage = ref(1);\r\n        const total = ref(0);\r\n        const list = ref([]);\r\n        const loading = ref(true);\r\n\r\n\r\n        const getList = async ()=>{\r\n            loading.value = true;\r\n            const res = await  log.list(curPage.value,20);\r\n            loading.value = false;\r\n\r\n            result(res)\r\n             .success(( {data :{ list:l ,total:t }})=>{\r\n                l.forEach((item)=>{\r\n                    item.action = getLogInfoByPath(item.request.url)\r\n                    \r\n                });\r\n                \r\n                list.value = l;\r\n                total.value = t;\r\n             });\r\n        }\r\n\r\n        onMounted(()=>{\r\n            getList();\r\n        });\r\n\r\n        const setPage = (page)=>{\r\n            curPage.value = page;\r\n            getList();\r\n        }\r\n\r\n        const remove =async({ _id })=>{\r\n            const res = await log.remove(_id);\r\n            result(res)\r\n             .success(({msg })=>{\r\n                 message.success(msg)\r\n             });\r\n        }\r\n        return {\r\n            curPage,\r\n            total,\r\n            list,\r\n            columns,\r\n            setPage,\r\n            loading,\r\n            formatTimeStamp,\r\n            remove,\r\n            simple:props.simple\r\n        }\r\n\r\n    }\r\n})","import { render } from \"./index.vue?vue&type=template&id=e5909912\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Molly Wang\\\\Desktop\\\\project\\\\building-material-mgr-fe\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_a_spin","spinning","_ctx","_component_a_card","_hoisted_3","_toDisplayString","book","_hoisted_6","user","_hoisted_9","log","_component_book","simple","_component_log","defineComponent","components","Book","Log","setup","loading","ref","baseInfo","getBaseInfo","async","value","res","dashboard","result","success","data","onMounted","__exports__","render","title","_hoisted_1","_createBlock","_component_a_divider","key","_component_a_table","bordered","columns","pagination","createdAt","record","meta","createAt","href","onClick","_hoisted_2","_component_flex_end","_component_a_pagination","style","current","$event","pageSize","total","onChange","LOG_MAP","getLogInfoByPath","path","forEach","item","includes","replace","props","Boolean","dataIndex","slots","customRender","push","curPage","list","getList","l","t","action","request","url","setPage","page","remove","_id","msg","message","formatTimeStamp"],"sourceRoot":""}